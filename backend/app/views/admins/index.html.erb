<!-- app/views/admins/index.html.erb -->
<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #333;
      color: #fff;
      padding: 10px;
      text-align: center;
    }

    h1 {
      color: #333;
    }

    table {
      width: 80%;
      margin: 20px auto;
      border-collapse: collapse;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: #fff;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    tr:hover {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>

  <header>
    <h1>Admin Dashboard</h1>
  </header>

  <table>
    <thead>
      <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Phone Number</th>
        <th>Home Address</th>
        <th>Email Address</th>
        <th> Status</th>
      </tr>
    </thead>
    <tbody>
  <% @users.each do |user| %>
    <tr>
      <td><%= user.first_name %></td>
      <td><%= user.last_name %></td>
      <td><%= user.phone_number %></td>
      <td><%= user.home_address %></td>
      <td><%= user.email_address %></td>
      <td>
        <% if user.status.present? %>
          <span class="badge <%= user.status == 'approved' ? 'badge-success' : (user.status == 'rejected' ? 'badge-danger' : 'badge-secondary') %>">
            <%= user.status.humanize %>
          </span>
        <% else %>
          <span class="badge badge-secondary">Unknown</span>
        <% end %>
      </td>
      <td>
        <%= form_for(user, url: update_user_status_path(user), method: :patch) do |f| %>
          <%= f.hidden_field :status, value: user.status %>
          <%= f.select :status, User.statuses.keys, { prompt: 'Select Status' }, class: 'form-control' %>
          <%= f.submit 'Update Status', class: 'btn btn-primary' %>
        <% end %>
      </td>
      <td>
        <!-- Button to show saved status -->
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#statusModal<%= user.id %>">
          Show Status
        </button>

        <!-- Modal -->
        <div class="modal fade" id="statusModal<%= user.id %>" tabindex="-1" role="dialog" aria-labelledby="statusModalLabel<%= user.id %>" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header bg-info text-white">
                <h5 class="modal-title" id="statusModalLabel<%= user.id %>">Saved Status</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <!-- Display saved status here -->
                <% if user.status.present? %>
                  <span class="badge <%= user.status == 'approved' ? 'badge-success' : (user.status == 'rejected' ? 'badge-danger' : 'badge-secondary') %>">
                    <%= user.status.humanize %>
                  </span>
                <% else %>
                  <span class="badge badge-secondary">Unknown</span>
                <% end %>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
  <% end %>
</tbody>
  </table>

</body>
</html>
